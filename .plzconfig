[please]
version = 17.27.0

[build]
timeout = 2000
path = /bin:/usr/bin:/usr/local/bin:/opt/toolchain/1.0/bin

[buildconfig]
;; Tracks the core revision.
core-revision = 43290b6dcbc34e5b191cc959fccb79651adaedfc
is-core-repo = true

[sandbox]
test = true

[display]
systemstats = true

[parse]
preloadsubincludes = ///shell//build_defs:shell
preloadSubincludes = ///python//build_defs:python
preloadsubincludes = ///go//build_defs:go
preloadsubincludes = ///proto//build_defs:proto
preloadsubincludes = //build_defs/proto:utils

[Plugin "shell"]
Target = //plugins:shell

[Plugin "python"]
Target = //plugins:python

[Plugin "go"]
Target = //plugins:go
GoTool = //tools/go:toolchain|go
ImportPath = github.com/malonaz/core
CgoEnabled = true

[Plugin "proto"]
Target = //plugins:proto
LanguageDef = //build_defs/proto:go
LanguageDef = //build_defs/proto:js
ProtocTool = //tools/proto:protoc

[Plugin "core"]
Target = //plugins:core
LintCodegenStripPrefix = malonaz

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; PLUGIN ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[PluginDefinition]
Name = core

[PluginConfig "lint_codegen_strip_prefix"]
ConfigKey = LintCodegenStripPrefix
DefaultValue = ""

[PluginConfig "protoc_gen_go"]
ConfigKey = ProtocGenGo
DefaultValue = //tools/proto:protoc-gen-go

[PluginConfig "protoc_gen_go_dep"]
ConfigKey = ProtocGenGoDep
DefaultValue = //tools/proto:protoc-gen-go-dep

[PluginConfig "protoc_gen_grpc_go"]
ConfigKey = ProtocGenGrpcGo
DefaultValue = //tools/proto:protoc-gen-go-grpc

[PluginConfig "protoc_gen_grpc_go_dep"]
ConfigKey = ProtocGenGrpcGoDep
DefaultValue = //tools/proto:protoc-gen-go-grpc-dep

[PluginConfig "protoc_gen_grpc_gateway_go"]
ConfigKey = ProtocGenGrpcGatewayGo
DefaultValue = //tools/proto:protoc-gen-grpc-gateway

[PluginConfig "protoc_gen_grpc_gateway_go_dep"]
ConfigKey = ProtocGenGrpcGatewayGoDep
DefaultValue = //tools/proto:protoc-gen-go-grpc-gateway-dep

[PluginConfig "protoc_gen_aip_go"]
ConfigKey = ProtocGenAipGo
DefaultValue = //tools/proto:protoc-gen-go-aip

[PluginConfig "protoc_gen_aip_go_dep"]
ConfigKey = ProtocGenAipGoDep
DefaultValue = //tools/proto:protoc-gen-go-aip-dep

[PluginConfig "protoc_gen_cobra_go_dep"]
ConfigKey = ProtocGenCobraGoDep
DefaultValue = //tools/proto:protoc-gen-go-cobra-dep

[PluginConfig "protoc_gen_templates_go"]
ConfigKey = ProtocGenTemplatesGo
DefaultValue = //tools/protoc-templates

[PluginConfig "validate_schema"]
ConfigKey = ValidateSchema
DefaultValue = //tools/validate-schema

[PluginConfig "templates_go"]
ConfigKey = TemplatesGo
DefaultValue = //tools/template

;; TEMPLATE-BASED DEPS GO HERE.
[PluginConfig "protoc_gen_model_go_dep"]
ConfigKey = ProtocGenModelGoDep
DefaultValue = //tools/proto:protoc-gen-go-model-dep

[PluginConfig "protoc_gen_llm_go_dep"]
ConfigKey = ProtocGenLlmGoDep
DefaultValue = //tools/proto:protoc-gen-go-llm-dep

[PluginConfig "protoc_gen_rpc_go_dep"]
ConfigKey = ProtocGenRpcGoDep
DefaultValue = //tools/proto:protoc-gen-go-rpc-dep

[PluginConfig "protoc_gen_postgres_go_dep"]
ConfigKey = ProtocGenPostgresGoDep
DefaultValue = //tools/proto:protoc-gen-go-postgres-dep


;; JS
[PluginConfig "protoc_gen_es"]
ConfigKey = ProtocGenEs
DefaultValue = //tools/proto:protoc-gen-es

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ALIASES ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[alias "tidy"]
desc = Tidy generates build targets for dependencies and makes sure that BUILD files are up-to-date.
cmd = run //tools/tidy

[alias "lint"]
desc = Tidy generates build targets for dependencies and makes sure that BUILD files are up-to-date.
cmd = run //tools/tidy:lint

[alias "bump"]
desc = Tidy generates build targets for dependencies and makes sure that BUILD files are up-to-date.
cmd = run //scripts:bump_core_dep
